<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="my-geo.html">
<link rel="import" href="my-video.html">
<link rel="import" href="position-tracker.html">

<polymer-element name="my-vr">
  <template>
<!--   <table cellpadding="0" cellspacing="0" style="width: 100%"> -->
<!-- 		<tr> -->
<!-- 			<td width="50%"><h1>Distance: <span>{{distance}}</span></h1></td> -->
<!-- 			<td width="50%"><h1>Distance: <span>{{distance}}</span></h1></td> -->
<!-- 		</tr> -->
<!--   </table> -->
  <my-video distance="{{distance}}" color="{{color}}"></my-video>
  <position-tracker id="myTracker" debug="true" distance="{{distance}}" targetfromsheet="true"/>
  <style>
  	h1 {
  		margin-bottom: 0px;
  		font-size: 12px;
  	}
  	table {
  		text-align: center;
  	}
  </style>
  </template>
  <script>
		Polymer({
			distance : 0,
			distancePrev : 0,
			color: '#000000',
			distanceChanged : function() {
				console.log("my-vr distanceChanged: " + this.distance);
				var diff = this.distance - this.distancePrev;
				if ( this.distancePrev > 0 && diff > 5 ) {
					this.color = 'red';
				} else if ( this.distancePrev > 0 && diff < -5 ){
					this.color = 'green';
				} else {
					this.color = 'yellow';
				}
				this.distancePrev = this.distance;
			},
			created : function() {
				//...
				console.log("my-vr created!");
			},
			ready : function() {
				//...
				console.log("my-vr ready!");
			}
			});
		</script>
</polymer-element>      